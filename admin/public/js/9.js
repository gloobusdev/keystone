webpackJsonp([9],{

/***/ 141:
/*!************************************************!*\
  !*** ./fields/components/FileChangeMessage.js ***!
  \************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = __webpack_require__(/*! react */ 1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _elemental = __webpack_require__(/*! elemental */ 3);\n\nvar _color = __webpack_require__(/*! ../../admin/client/utils/color */ 79);\n\nvar _theme = __webpack_require__(/*! ../../admin/client/theme */ 22);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction FileChangeMessage(_ref) {\n\tvar style = _ref.style,\n\t    color = _ref.color,\n\t    props = _objectWithoutProperties(_ref, ['style', 'color']);\n\n\tvar styles = _extends({\n\t\tmarginRight: 10,\n\t\tminWidth: 0\n\t}, style);\n\n\tif (color !== 'default') {\n\t\tstyles.backgroundColor = (0, _color.fade)(_theme2.default.color[color], 10);\n\t\tstyles.borderColor = (0, _color.fade)(_theme2.default.color[color], 30);\n\t\tstyles.color = _theme2.default.color[color];\n\t}\n\n\treturn _react2.default.createElement(_elemental.FormInput, _extends({\n\t\tnoedit: true,\n\t\tstyle: styles\n\t}, props));\n};\n\nFileChangeMessage.propTypes = {\n\tcolor: _react.PropTypes.oneOf(['danger', 'default', 'success'])\n};\nFileChangeMessage.defaultProps = {\n\tcolor: 'default'\n};\n\nmodule.exports = FileChangeMessage;\n\n//////////////////\n// WEBPACK FOOTER\n// ./fields/components/FileChangeMessage.js\n// module id = 141\n// module chunks = 3 4 9\n//# sourceURL=webpack:///./fields/components/FileChangeMessage.js?");

/***/ },

/***/ 142:
/*!**********************************************!*\
  !*** ./fields/components/HiddenFileInput.js ***!
  \**********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/*\n\tExpose internal ref to parent\n\t=============================\n\n\tField.create({\n\t\ttriggerFileBrowser () {\n\t\t\tthis.refs.fileInput.clickDomNode();\n\t\t},\n\t\trender () {\n\t\t\t<HiddenFileInput ref=\"fileInput\" />\n\t\t}\n\t});\n*/\n\nvar HiddenFileInput = function (_Component) {\n\t_inherits(HiddenFileInput, _Component);\n\n\tfunction HiddenFileInput() {\n\t\t_classCallCheck(this, HiddenFileInput);\n\n\t\tvar _this = _possibleConstructorReturn(this, (HiddenFileInput.__proto__ || Object.getPrototypeOf(HiddenFileInput)).call(this));\n\n\t\t_this.clearValue = _this.clearValue.bind(_this);\n\t\t_this.clickDomNode = _this.clickDomNode.bind(_this);\n\t\t_this.hasValue = _this.hasValue.bind(_this);\n\t\treturn _this;\n\t}\n\n\t_createClass(HiddenFileInput, [{\n\t\tkey: 'clearValue',\n\t\tvalue: function clearValue() {\n\t\t\tthis.target.value = '';\n\t\t}\n\t}, {\n\t\tkey: 'clickDomNode',\n\t\tvalue: function clickDomNode() {\n\t\t\tthis.target.click();\n\t\t}\n\t}, {\n\t\tkey: 'hasValue',\n\t\tvalue: function hasValue() {\n\t\t\treturn !!this.target.value;\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar _props = this.props,\n\t\t\t    style = _props.style,\n\t\t\t    props = _objectWithoutProperties(_props, ['style']);\n\n\t\t\tvar setRef = function setRef(n) {\n\t\t\t\treturn _this2.target = n;\n\t\t\t};\n\t\t\tvar styles = _extends({\n\t\t\t\tleft: -9999,\n\t\t\t\tposition: 'absolute'\n\t\t\t}, style);\n\n\t\t\treturn _react2.default.createElement('input', _extends({}, props, {\n\t\t\t\tstyle: styles,\n\t\t\t\tref: setRef,\n\t\t\t\ttabIndex: '-1',\n\t\t\t\ttype: 'file'\n\t\t\t}));\n\t\t}\n\t}]);\n\n\treturn HiddenFileInput;\n}(_react.Component);\n\n;\n\nHiddenFileInput.propTypes = {\n\tonChange: _react.PropTypes.func.isRequired\n};\n\nmodule.exports = HiddenFileInput;\n\n//////////////////\n// WEBPACK FOOTER\n// ./fields/components/HiddenFileInput.js\n// module id = 142\n// module chunks = 3 4 9\n//# sourceURL=webpack:///./fields/components/HiddenFileInput.js?");

/***/ },

/***/ 717:
/*!*********************************************************************************!*\
  !*** ./~/babel-loader?{"cacheDirectory":true}!./fields/types/file/FileField.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _Field = __webpack_require__(/*! ../Field */ 19);\n\nvar _Field2 = _interopRequireDefault(_Field);\n\nvar _react = __webpack_require__(/*! react */ 1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _elemental = __webpack_require__(/*! elemental */ 3);\n\nvar _FileChangeMessage = __webpack_require__(/*! ../../components/FileChangeMessage */ 141);\n\nvar _FileChangeMessage2 = _interopRequireDefault(_FileChangeMessage);\n\nvar _HiddenFileInput = __webpack_require__(/*! ../../components/HiddenFileInput */ 142);\n\nvar _HiddenFileInput2 = _interopRequireDefault(_HiddenFileInput);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar FileThumb = function FileThumb(_ref) {\n\tvar url = _ref.url;\n\n\tvar isPicture = url && url.match(/\\.(jpeg|jpg|gif|png|svg)$/i) != null;\n\tif (!isPicture) {\n\t\t// TODO generic icons\n\t\treturn false;\n\t}\n\treturn _react2.default.createElement('div', {\n\t\tstyle: {\n\t\t\twidth: 150,\n\t\t\tmarginRight: 10,\n\t\t\tflexShrink: 0,\n\t\t\tbackgroundImage: 'url(' + url + ')',\n\t\t\tbackgroundPosition: 'center center',\n\t\t\tbackgroundSize: 'contain',\n\t\t\tbackgroundRepeat: 'no-repeat'\n\t\t}\n\t});\n}; /**\n   TODO:\n   - Format size of stored file (if present) using bytes package?\n   - Display file type icon? (see LocalFileField)\n   */\n\nvar FileDom = function FileDom(_ref2) {\n\tvar url = _ref2.url,\n\t    filename = _ref2.filename;\n\n\treturn _react2.default.createElement(\n\t\t'div',\n\t\t{ style: { display: 'flex' } },\n\t\t_react2.default.createElement(FileThumb, { url: url }),\n\t\t_react2.default.createElement(\n\t\t\t'div',\n\t\t\t{ style: {\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\tjustifyContent: 'flex-end',\n\t\t\t\t\talignItems: 'flex-start',\n\t\t\t\t\tminHeight: 100,\n\t\t\t\t\twidth: '100%'\n\t\t\t\t} },\n\t\t\t_react2.default.createElement(\n\t\t\t\t_FileChangeMessage2.default,\n\t\t\t\tnull,\n\t\t\t\turl ? _react2.default.createElement(\n\t\t\t\t\t'a',\n\t\t\t\t\t{ href: url },\n\t\t\t\t\tfilename\n\t\t\t\t) : filename\n\t\t\t),\n\t\t\turl && _react2.default.createElement(\n\t\t\t\t'span',\n\t\t\t\t{ style: { fontSize: 10 } },\n\t\t\t\t'url: ',\n\t\t\t\turl\n\t\t\t)\n\t\t)\n\t);\n};\n\nvar uploadInc = 1000;\n\nvar buildInitialState = function buildInitialState(props) {\n\treturn {\n\t\taction: null,\n\t\tremoveExisting: false,\n\t\tuploadFieldPath: 'File-' + props.path + '-' + ++uploadInc,\n\t\tuserSelectedFile: null\n\t};\n};\n\nmodule.exports = _Field2.default.create({\n\tpropTypes: {\n\t\tautoCleanup: _react.PropTypes.bool,\n\t\tcollapse: _react.PropTypes.bool,\n\t\tlabel: _react.PropTypes.string,\n\t\tnote: _react.PropTypes.string,\n\t\tpath: _react.PropTypes.string.isRequired,\n\t\tvalue: _react.PropTypes.shape({\n\t\t\tfilename: _react.PropTypes.string\n\t\t})\n\t},\n\tgetInitialState: function getInitialState() {\n\t\treturn buildInitialState(this.props);\n\t},\n\tshouldCollapse: function shouldCollapse() {\n\t\treturn this.props.collapse && !this.hasExisting();\n\t},\n\tcomponentWillUpdate: function componentWillUpdate(nextProps) {\n\t\tvar value = this.props.value || {};\n\t\tvar nextVal = nextProps.value || {};\n\t\t// Show the new filename when it's finished uploading\n\t\tif (value.filename !== nextVal.filename) {\n\t\t\tthis.setState(buildInitialState(nextProps));\n\t\t}\n\t},\n\n\n\t// ==============================\n\t// HELPERS\n\t// ==============================\n\n\thasFile: function hasFile() {\n\t\treturn this.hasExisting() || !!this.state.userSelectedFile;\n\t},\n\thasExisting: function hasExisting() {\n\t\treturn this.props.value && !!this.props.value.filename;\n\t},\n\tgetFilename: function getFilename() {\n\t\tvar value = this.props.value;\n\t\tvar userSelectedFile = this.state.userSelectedFile;\n\n\t\treturn userSelectedFile ? userSelectedFile.name : value && (value.originalname || value.filename);\n\t},\n\n\n\t// ==============================\n\t// METHODS\n\t// ==============================\n\n\ttriggerFileBrowser: function triggerFileBrowser() {\n\t\tthis.fileInput && this.fileInput.clickDomNode();\n\t},\n\thandleFileChange: function handleFileChange(event) {\n\t\tvar userSelectedFile = event.target.files[0];\n\n\t\tthis.setState({\n\t\t\tuserSelectedFile: userSelectedFile\n\t\t});\n\t},\n\thandleRemove: function handleRemove(e) {\n\t\tvar state = {};\n\n\t\tif (this.state.userSelectedFile) {\n\t\t\tstate = buildInitialState(this.props);\n\t\t} else if (this.hasExisting()) {\n\t\t\tstate.removeExisting = true;\n\n\t\t\tif (this.props.autoCleanup) {\n\t\t\t\tif (e.altKey) {\n\t\t\t\t\tstate.action = 'reset';\n\t\t\t\t} else {\n\t\t\t\t\tstate.action = 'delete';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e.altKey) {\n\t\t\t\t\tstate.action = 'delete';\n\t\t\t\t} else {\n\t\t\t\t\tstate.action = 'reset';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setState(state);\n\t},\n\tundoRemove: function undoRemove() {\n\t\tthis.setState(buildInitialState(this.props));\n\t},\n\n\n\t// ==============================\n\t// RENDERERS\n\t// ==============================\n\n\trenderFileNameAndChangeMessage: function renderFileNameAndChangeMessage() {\n\t\tvar value = this.props.value;\n\n\t\tvar url = void 0;\n\t\tvar filename = void 0;\n\t\tif (this.hasFile() && !this.state.removeExisting) {\n\t\t\turl = value && value.url;\n\t\t\tfilename = this.getFilename();\n\t\t}\n\t\treturn _react2.default.createElement(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\tfilename && _react2.default.createElement(FileDom, { url: url, filename: filename }),\n\t\t\tthis.renderChangeMessage()\n\t\t);\n\t},\n\trenderChangeMessage: function renderChangeMessage() {\n\t\tif (this.state.userSelectedFile) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_FileChangeMessage2.default,\n\t\t\t\t{ type: 'success' },\n\t\t\t\t'File selected - save to upload'\n\t\t\t);\n\t\t} else if (this.state.removeExisting) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_FileChangeMessage2.default,\n\t\t\t\t{ type: 'danger' },\n\t\t\t\t'File ',\n\t\t\t\tthis.props.autoCleanup ? 'deleted' : 'removed',\n\t\t\t\t' - save to confirm'\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\trenderClearButton: function renderClearButton() {\n\t\tif (this.state.removeExisting) {\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_elemental.Button,\n\t\t\t\t{ type: 'link', onClick: this.undoRemove },\n\t\t\t\t'Undo Remove'\n\t\t\t);\n\t\t} else {\n\t\t\tvar clearText;\n\t\t\tif (this.state.userSelectedFile) {\n\t\t\t\tclearText = 'Cancel Upload';\n\t\t\t} else {\n\t\t\t\tclearText = this.props.autoCleanup ? 'Delete File' : 'Remove File';\n\t\t\t}\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t_elemental.Button,\n\t\t\t\t{ type: 'link-cancel', onClick: this.handleRemove },\n\t\t\t\tclearText\n\t\t\t);\n\t\t}\n\t},\n\trenderActionInput: function renderActionInput() {\n\t\t// If the user has selected a file for uploading, we need to point at\n\t\t// the upload field. If the file is being deleted, we submit that.\n\t\tif (this.state.userSelectedFile || this.state.action) {\n\t\t\tvar value = this.state.userSelectedFile ? 'upload:' + this.state.uploadFieldPath : this.state.action === 'delete' ? 'remove' : '';\n\t\t\treturn _react2.default.createElement('input', {\n\t\t\t\tname: this.getInputName(this.props.path),\n\t\t\t\ttype: 'hidden',\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\trenderUI: function renderUI() {\n\t\tvar _this = this;\n\n\t\tvar buttons = _react2.default.createElement(\n\t\t\t'div',\n\t\t\t{ style: this.hasFile() ? { marginTop: '1em' } : null },\n\t\t\t_react2.default.createElement(\n\t\t\t\t_elemental.Button,\n\t\t\t\t{ onClick: this.triggerFileBrowser },\n\t\t\t\tthis.hasFile() ? 'Change' : 'Upload',\n\t\t\t\t' File'\n\t\t\t),\n\t\t\tthis.hasFile() && this.renderClearButton()\n\t\t);\n\n\t\treturn _react2.default.createElement(\n\t\t\t'div',\n\t\t\t{ 'data-field-name': this.props.path, 'data-field-type': 'file' },\n\t\t\t_react2.default.createElement(\n\t\t\t\t_elemental.FormField,\n\t\t\t\t{ label: this.props.label, htmlFor: this.props.path },\n\t\t\t\tthis.shouldRenderField() ? _react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.hasFile() && this.renderFileNameAndChangeMessage(),\n\t\t\t\t\tbuttons,\n\t\t\t\t\t_react2.default.createElement(_HiddenFileInput2.default, {\n\t\t\t\t\t\tkey: this.state.uploadFieldPath,\n\t\t\t\t\t\tname: this.state.uploadFieldPath,\n\t\t\t\t\t\tonChange: this.handleFileChange,\n\t\t\t\t\t\tref: function ref(el) {\n\t\t\t\t\t\t\t_this.fileInput = el;\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tthis.renderActionInput()\n\t\t\t\t) : _react2.default.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.hasFile() ? this.renderFileNameAndChangeMessage() : _react2.default.createElement(\n\t\t\t\t\t\t_elemental.FormInput,\n\t\t\t\t\t\t{ noedit: true },\n\t\t\t\t\t\t'no file'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\t!!this.props.note && _react2.default.createElement(_elemental.FormNote, { note: this.props.note })\n\t\t\t)\n\t\t);\n\t}\n});\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-loader?{\"cacheDirectory\":true}!./fields/types/file/FileField.js\n// module id = 717\n// module chunks = 9\n//# sourceURL=webpack:///./fields/types/file/FileField.js?./~/babel-loader?%7B%22cacheDirectory%22:true%7D");

/***/ }

});